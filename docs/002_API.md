# Documentación de la API

La API está construida con FastAPI y expone los endpoints necesarios para:

- Subir documentos.
- Consultar su estado y resultados.
- Buscar por contenido.
- Hacer health-check del servicio.

La documentación interactiva está disponible en:

- Swagger UI: `http://localhost:8000/docs`

---

## Endpoints principales

### 1. `POST /documents`

Sube un documento y dispara el proceso de análisis.

- Método: `POST`
- URL: `/documents`
- Content-Type: `multipart/form-data`
- Parámetros:
  - `file`: archivo a procesar (PDF, DOCX, JSON, etc.)

```bash
curl -X POST "http://localhost:8000/documents"   -F "file=@./docs/samples/test_document_ai_system.pdf"
```

Respuesta (ejemplo):

```json
{
  "id": "a17e5dbe-...",
  "filename": "test_document_ai_system.pdf",
  "content_type": "application/pdf",
  "status": "DONE",
  "text": "New AI system transforms document processing...",
  "structure": {},
  "classification": {
    "category": "technology",
    "confidence": 0.82,
    "candidates": [
      { "category": "technology", "score": 0.82 },
      { "category": "science", "score": 0.73 }
    ],
    "strategy": "semantic_category_similarity"
  },
  "entities": {
    "entities": [
      {
        "text": "AI",
        "label": "ORG",
        "start_char": 4,
        "end_char": 6
      }
    ]
  }
}
```

---

### 2. `GET /documents/{document_id}`

Obtiene la información de un documento ya procesado.

- Método: `GET`
- URL: `/documents/{document_id}`

Ejemplo:

```bash
curl "http://localhost:8000/documents/a17e5dbe-..."
```

Respuesta (ejemplo):

- Mismo formato que el `POST /documents`, pero sin volver a procesar el archivo.

---

### 3. `GET /search`

Permite buscar documentos por contenido.

- Método: `GET`
- URL: `/search`
- Parámetros:
  - `q` (obligatorio): texto a buscar.
  - `limit` (opcional): máximo de resultados (por defecto 10).

Ejemplo:

```bash
curl "http://localhost:8000/search?q=artificial%20intelligence&limit=5"
```

Respuesta (ejemplo):

```json
{
  "query": "artificial intelligence",
  "results": [
    {
      "document_id": "a17e5dbe-...",
      "score": 1.0,
      "filename": "test_document_ai_system.pdf",
      "snippet": "New artificial intelligence system is being used..."
    }
  ]
}
```


---

## Uso de Swagger (FastAPI)

1. Abrir el navegador en:

   ```text
   http://localhost:8000/docs
   ```

3. Desde ahí se puede:
   - Probar `POST /documents` subiendo un archivo.
   - Probar `GET /documents/{id}` pegando el id de la respuesta.
   - Probar `GET /search` pasando un query simple.

